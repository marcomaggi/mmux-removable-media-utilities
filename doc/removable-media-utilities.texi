\input texinfo.tex
@c %**start of header
@setfilename removable-media-utilities.info
@settitle Removable Media Utilities
@c %**end of header

@include version.texi
@include macros.texi

@c page
@c ------------------------------------------------------------
@c Values.
@c ------------------------------------------------------------

@set TITLE                      Removable Media Utilities

@c To be used as @value{PACKAGE} whenever we need to include the full
@c name of this package.
@set PACKAGE                    Removable Media Utilities

@c To be used as @value{PACKAGE} whenever we need to include the
@c nickname of the project: the name that is used to compose the
@c distribution tarball or the web address.
@set PACKAGE_NICKNAME           removable-media-utilities

@c To be used as @value{AUTHOR} whenever we need to include the list of
@c authors of this document.
@set AUTHOR                     Marco Maggi

@c To be used as @value{AUTHOR_EMAIL} whenever we need to include the
@c email of the *single* author of this document.
@set AUTHOR_EMAIL               @email{marco.maggi.ipsu@@poste.it}

@c To be used as @value{COPYRIGHT_YEARS} whenever we need to include the
@c list of copyright years.
@set COPYRIGHT_YEARS            2013

@c ------------------------------------------------------------

@set GITHUB_URL                 @url{http://github.com/marcomaggi/removable-media-utilities}
@set DOCUMENTATION_URL          @url{http://marcomaggi.github.com/docs/removable-media-utilities.html}

@c page
@c ------------------------------------------------------------
@c Copyright notice.
@c ------------------------------------------------------------

@copying
This document describes version @version{} of @value{PACKAGE}, a
distribution of @gnu{} Bash scripts; it provides utilities to handle
removable media like @usb{} pendrives and CD-ROMs.

The package is distributed under the terms of the @gnu{} General Public
License (@gpl{}) and can be downloaded from:

@center @value{GITHUB_URL}

@noindent
Copyright @copyright{} @value{COPYRIGHT_YEARS} by @value{AUTHOR} @value{AUTHOR_EMAIL}

@quotation
Permission is granted to copy, distribute and/or modify this document
under the terms of the @gnu{} Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with
Invariant Sections being ``@gnu{} Free Documentation License'' and
``@gnu{} General Public License'', no Front--Cover Texts, and no
Back--Cover Texts.  A copy of the license is included in the section
entitled ``@gnu{} Free Documentation License''.
@end quotation
@end copying

@c page
@c ------------------------------------------------------------
@c Headers.
@c ------------------------------------------------------------

@titlepage
@title @value{TITLE}
@subtitle Revision @version{}
@author @value{AUTHOR} @value{AUTHOR_EMAIL}
@page
@vskip 0pt plus 1filll
@insertcopying
@end titlepage

@c ------------------------------------------------------------

@ifinfo
@dircategory Development
@direntry
* removable-media-utilities: (removable-media-utilities). @value{TITLE}.
@end direntry
@end ifinfo

@c ------------------------------------------------------------

@ignore
@syncodeindex tp cp
@syncodeindex vr cp
@syncodeindex fn cp
@end ignore

@c page
@ifnottex
@node Top
@top @value{TITLE}

@insertcopying

@menu
* overview::                    Overview of the package.
* pendrive::                    Managing @usb{} pendrives.
* cdrom::                       Managing CD-ROMs.
* floppy-disk::                 Managing floppy disks.

Appendices

* Package License::             GNU General Public License.
* Documentation License::       GNU Free Documentation License.
* references::                  Bibliography and references.

Indexes

* concept index::               An entry for each concept.
* function index::              An entry for each function.
* variable index::              An entry for each variable.
* type index::                  An entry for each type.
@end menu
@end ifnottex

@c page
@node overview
@chapter Overview of the package


This document describes version @version{} of @value{PACKAGE}, a
distribution of @gnu{} Bash scripts; it provides utilities to handle
removable media like @usb{} pendrives and CD-ROMs.  To use this package,
the system requirements must be satisfied:

@itemize
@item
The scripts expect the group @code{plugdev} to exist and to allow
members to access removable media; on a Slackware system:

@example
$ grep plugdev /etc/groups
plugdev:x:83:user1,user2
@end example

@item
When a removable media is plugged in, for example a @usb{} pendrive, the
device is:

@example
$ ls -l /dev/sdb1
brw-rw---- 1 root plugdev 8, 17 May 24 20:13 /dev/sdb1
@end example

@item
The file @file{/etc/fstab} contains the following entry for the mount
point:

@smallexample
/dev/sdb1 /mnt/stick auto defaults,noauto,sync,nosuid,rw,group 0 0
@end smallexample

@item
The command @command{sudo} must be configured appropriately to allow
members of the group @code{plugdev} to handle removable media.  It is
suggested to add the following lines to @file{/etc/sudoers}:

@smallexample
User_Alias      PLUGDEV         = %plugdev

Cmnd_Alias      PENDRIVE_MOUNT  = /usr/local/bin/pendrive sudo-mount
Cmnd_Alias      PENDRIVE_UMOUNT = /usr/local/bin/pendrive sudo-umount
Cmnd_Alias      PENDRIVE_CMDS   = PENDRIVE_MOUNT, PENDRIVE_UMOUNT

Cmnd_Alias      CDROM_MOUNT     = /usr/local/bin/cdrom sudo-mount
Cmnd_Alias      CDROM_UMOUNT    = /usr/local/bin/cdrom sudo-umount
Cmnd_Alias      CDROM_CMDS      = CDROM_MOUNT, CDROM_UMOUNT

Cmnd_Alias      FLOPPY_MOUNT    = /usr/local/bin/floppy-disk sudo-mount
Cmnd_Alias      FLOPPY_UMOUNT   = /usr/local/bin/floppy-disk sudo-umount
Cmnd_Alias      FLOPPY_FORMAT   = /usr/local/bin/floppy-disk sudo-format
Cmnd_Alias      FLOPPY_MKFS     = /usr/local/bin/floppy-disk sudo-mkfs
Cmnd_Alias      FLOPPY_CMDS     = FLOPPY_MOUNT, FLOPPY_UMOUNT, FLOPPY_FORMAT, FLOPPY_MKFS

PLUGDEV         ALL = NOPASSWD: PENDRIVE_CMDS, CDROM_CMDS, FLOPPY_CMDS
@end smallexample
@end itemize

With these system configuration, users that are members of the group
@code{plugdev} can mount a @usb{} pendrive with:

@smallexample
$ pendrive mount
/usr/bin/sudo /usr/local/bin/pendrive sudo-mount 1000 1000
/bin/mount /mnt/stick -o uid=1000,gid=1000
/dev/sdb1    on /mnt/stick   vfat (rw,nosuid,nodev,sync,uid=1000,gid=1000) [STORE N GO]
@end smallexample

@noindent
and unmount it with:

@example
$ pendrive umount
/usr/bin/sudo /usr/local/bin/pendrive sudo-umount
/bin/umount /mnt/stick
@end example

@c page
@node pendrive
@chapter Managing @usb{} pendrives


@c page
@node cdrom
@chapter Managing CD-ROMs


@c page
@node floppy-disk
@chapter Managing floppy disks


@c page
@c ------------------------------------------------------------
@c Appendices.
@c ------------------------------------------------------------

@include gpl-3.0.texi
@include fdl-1.3.texi

@c page
@node references
@appendix Bibliography and references


The documentation of @value{PACKAGE} is available online:

@center @value{DOCUMENTATION_URL}

@noindent
the latest version of this package can be downloaded from:

@center @value{GITHUB_URL}

@c page
@node concept index
@appendix An entry for each concept

@printindex cp

@node function index
@appendix An entry for each function.

@printindex fn

@node variable index
@appendix An entry for each variable.

@printindex vr

@node type index
@appendix An entry for each type.

@printindex tp

@contents
@bye

@c end of file

